@import "./style/variables.css";

/* CSS Custom Properties for yasr theming */
:root {
  --yasr-bg: #ffffff;
  --yasr-text: #000000;
  --yasr-border: #d1d1d1;
  --yasr-link: #428bca;
  --yasr-link-hover: #2a6496;
  --yasr-btn-text: #000000;
  --yasr-btn-selected: #337ab7;
  --yasr-fallback-bg: #f7f7f7;
  --yasr-fallback-border: #d1d1d1;
  --yasr-help-bg: #dff0ff;
  --yasr-help-text: #428bca;
  --yasr-chip-bg: #f5f5f5;
  --yasr-chip-text: #505050;
}

html[data-theme="dark"] {
  --yasr-bg: #1e1e1e;
  --yasr-text: #d4d4d4;
  --yasr-border: #3e3e3e;
  --yasr-link: #4fc3f7;
  --yasr-link-hover: #29b6f6;
  --yasr-btn-text: #c0c0c0;
  --yasr-btn-selected: #4fc3f7;
  --yasr-fallback-bg: #2d2d30;
  --yasr-fallback-border: #3e3e3e;
  --yasr-help-bg: #1a3a4a;
  --yasr-help-text: #4fc3f7;
  --yasr-chip-bg: #2d2d30;
  --yasr-chip-text: #cccccc;
}

.yasr {
  background-color: var(--yasr-bg);
  color: var(--yasr-text);
  display: flex;
  flex-direction: column;
  min-width: 0; /* Allow flex item to shrink below content size */
  overflow: hidden; /* Prevent any overflow */

  /* Ensure all direct children respect the flex container */
  > * {
    min-width: 0; /* Allow flex children to shrink */
    flex-shrink: 1;
  }

  .yasr_btn {
    border: none;
    background: inherit;
    color: var(--yasr-btn-text);
  }

  .svgImg {
    display: flex;
    flex-direction: row;

    svg {
      max-width: 100%;
      max-height: 100%;
      width: 15px;
      height: 15px;
      align-self: center;
    }
  }

  .yasr_btn.yasr_external_ref_btn {
    font-weight: 600;
    user-select: none;

    /* Active and focus shouldn't color the button since it'll open a new page */
    &:active,
    &:focus {
      color: inherit;
      text-decoration-color: inherit;
    }

    .svgImg svg {
      width: 18px;
      height: 18px;
    }
  }

  a {
    color: var(--yasr-link);
    text-decoration: none;

    &:hover,
    &:active {
      outline: 0;
      color: var(--yasr-link-hover);
      text-decoration: underline;
    }
  }

  .yasr_btnGroup {
    margin: 0;
    padding: 0;
    list-style: none;
    display: flex;
    overflow: hidden; /* Prevent horizontal scrollbar */
    min-width: 0; /* Allow flex container to shrink */
    flex-wrap: wrap; /* Allow wrapping if needed */

    .plugin_icon {
      height: 15px;
      width: 15px;
      margin-right: 5px;
      text-align: center;
    }

    .yasr_btn {
      /* redeclared here to target yasr_btns in btnGroup */
      border-bottom: 2px solid transparent;
      flex-shrink: 0; /* Prevent buttons from shrinking too much */
      white-space: nowrap;

      &.selected {
        border-bottom: 2px solid var(--yasr-btn-selected);
      }

      padding-left: 6px;
      padding-right: 6px;
      margin-left: 6px;
      margin-right: 6px;
    }
  }

  /* Default med screen + */
  @media (max-width: 768px) {
    .yasr_btn {
      span {
        display: none;
      }

      .plugin_icon {
        margin-right: 0px;
      }
    }
  }

  .yasr_header {
    display: flex;
    flex-wrap: wrap;
    min-width: 0; /* Allow flex container to shrink */
    overflow: hidden;
  }

  .yasr_fallback_info:not(:empty) {
    margin-top: 5px;
    border: 1px solid var(--yasr-fallback-border);
    padding: 0.5rem;
    background: var(--yasr-fallback-bg);

    p {
      margin: 0;
    }
  }

  .yasr_help_variable {
    background: var(--yasr-help-bg);
    color: var(--yasr-help-text);
  }

  .yasr_response_chip {
    color: var(--yasr-chip-text);
    background: var(--yasr-chip-bg);
    border-radius: 6px;
    display: flex;
    font-size: 11pt;
    max-height: 16pt;
    align-self: center;
    align-items: center;
    justify-content: center;
    white-space: nowrap;
    padding: 6px 6px;
    margin-left: 5px;
    overflow: hidden; /* Prevent text overflow */
    flex-shrink: 0; /* Don't shrink the chip */

    &.empty {
      display: none;
    }
  }

  .yasr_plugin_control {
    display: flex;
    margin-left: auto;
    align-items: center;
    flex-shrink: 0; /* Don't shrink controls */
    min-width: 0; /* But allow content to shrink */

    &:empty {
      display: none;
    }
  }

  .yasr_btn {
    color: var(--yasr-btn-text);
    fill: var(--yasr-btn-text);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    white-space: nowrap;
    padding: 6px 12px;
    overflow: visible;
    box-sizing: border-box;

    &.btn_icon {
      padding: 4px 8px;
    }

    &[disabled],
    &.disabled {
      cursor: default;
      opacity: 0.5;
      box-shadow: none;
    }

    &:not(.disabled):hover {
      fill: var(--yasr-link);
      color: var(--yasr-link);
    }

    &:focus,
    &.selected {
      color: var(--yasr-btn-selected);
      fill: var(--yasr-btn-selected);
    }
  }

  .space_element {
    flex-grow: 1;
    min-width: 0; /* Allow space element to shrink to 0 */
  }
}
